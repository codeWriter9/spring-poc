<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>AppConfig.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">swagger-rest-client</a> &gt; <a href="index.source.html" class="el_package">com.ghosh.sanjay.config</a> &gt; <span class="el_source">AppConfig.java</span></div><h1>AppConfig.java</h1><pre class="source lang-java linenums">package com.ghosh.sanjay.config;

import static java.lang.invoke.MethodHandles.lookup;
import static org.slf4j.LoggerFactory.getLogger;
import static springfox.documentation.builders.PathSelectors.any;
import static springfox.documentation.builders.RequestHandlerSelectors.basePackage;
import static springfox.documentation.spi.DocumentationType.SWAGGER_2;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.Collections;

import org.everit.json.schema.Schema;
import org.everit.json.schema.loader.SchemaLoader;
import org.json.JSONException;
import org.json.JSONObject;
import org.json.JSONTokener;
import org.slf4j.Logger;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.boot.web.client.RestTemplateBuilder;
import org.springframework.boot.web.client.RestTemplateCustomizer;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.PropertySource;
import org.springframework.core.io.Resource;
import org.springframework.http.HttpHeaders;
import org.springframework.http.MediaType;
import org.springframework.stereotype.Component;
import org.springframework.web.client.RestTemplate;

import springfox.documentation.spring.web.plugins.Docket;
import springfox.documentation.swagger2.annotations.EnableSwagger2;

@Configuration
@PropertySource(&quot;classpath:rest.properties&quot;)
@Component
<span class="fc" id="L38">public class AppConfig {</span>

<span class="fc" id="L40">	private static Logger LOG = getLogger(lookup().lookupClass());</span>

	@Value(&quot;${rest.client.basic.auth.username}&quot;)
	private String userName;

	@Value(&quot;${rest.client.basic.auth.password}&quot;)
	private String password;

	@Value(&quot;${rest.client.base.url}&quot;)
	private String url;

	@Value(&quot;${rest.service.controllers.base}&quot;)
	private String basePackage;

	@Value(&quot;classpath:${rest.schema.base}&quot;)
	private Resource schemaFile;

	@Bean
	public Schema schema() {
<span class="fc" id="L59">		try (BufferedReader reader = new BufferedReader(new InputStreamReader(schemaFile.getInputStream()))) {</span>
<span class="fc" id="L60">			return SchemaLoader.load(new JSONObject(new JSONTokener(reader)));</span>
<span class="nc" id="L61">		} catch (JSONException | IOException e) {</span>
<span class="nc" id="L62">			LOG.error(e.getMessage());</span>
<span class="nc" id="L63">			return null;</span>
		}
	}

	@Bean(&quot;restTemplate&quot;)
	public RestTemplate restTemplate() {
<span class="fc" id="L69">		return new RestTemplateBuilder(restTemplateCustomizer()).basicAuthentication(userName, password).build();</span>
	}

	@Bean
	public String url() {
<span class="fc" id="L74">		return url;</span>
	}

	@Bean
	public RestTemplateCustomizer restTemplateCustomizer() {
<span class="fc" id="L79">		return (restTemplate) -&gt; {</span>

<span class="fc" id="L81">		};</span>
	}

	HttpHeaders headers(MediaType mediaType) {
<span class="nc" id="L85">		HttpHeaders headers = new HttpHeaders();</span>
<span class="nc" id="L86">		headers.setAccept(Collections.singletonList(mediaType));</span>
<span class="nc" id="L87">		return headers;</span>
	}

	@Configuration
	@EnableSwagger2
<span class="fc" id="L92">	public class SwaggerConfig {</span>
		@Bean
		public Docket api() {
<span class="fc" id="L95">			return new Docket(SWAGGER_2).select().apis(basePackage(basePackage)).paths(any()).build();</span>
		}
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.4.201905082037</span></div></body></html>